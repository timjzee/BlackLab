<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migration guide | BlackLab</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Documentation for the corpus search engine BlackLab">
    
    <link rel="preload" href="/BlackLab/assets/css/0.styles.490e2dbe.css" as="style"><link rel="preload" href="/BlackLab/assets/js/app.7a3441ee.js" as="script"><link rel="preload" href="/BlackLab/assets/js/2.5fe0985c.js" as="script"><link rel="preload" href="/BlackLab/assets/js/21.61b5d978.js" as="script"><link rel="prefetch" href="/BlackLab/assets/js/10.e0923afa.js"><link rel="prefetch" href="/BlackLab/assets/js/11.258e7acb.js"><link rel="prefetch" href="/BlackLab/assets/js/12.7e546e9f.js"><link rel="prefetch" href="/BlackLab/assets/js/13.e012f2f0.js"><link rel="prefetch" href="/BlackLab/assets/js/14.91ee3f32.js"><link rel="prefetch" href="/BlackLab/assets/js/15.2ed4bb72.js"><link rel="prefetch" href="/BlackLab/assets/js/16.eb35820c.js"><link rel="prefetch" href="/BlackLab/assets/js/17.a83da584.js"><link rel="prefetch" href="/BlackLab/assets/js/18.31e6f47b.js"><link rel="prefetch" href="/BlackLab/assets/js/19.968dfe1c.js"><link rel="prefetch" href="/BlackLab/assets/js/20.80fd51f0.js"><link rel="prefetch" href="/BlackLab/assets/js/22.eb26afc2.js"><link rel="prefetch" href="/BlackLab/assets/js/23.188da129.js"><link rel="prefetch" href="/BlackLab/assets/js/24.11fd7da1.js"><link rel="prefetch" href="/BlackLab/assets/js/25.2fcaa546.js"><link rel="prefetch" href="/BlackLab/assets/js/26.ef5ef092.js"><link rel="prefetch" href="/BlackLab/assets/js/27.fec955fe.js"><link rel="prefetch" href="/BlackLab/assets/js/28.240b166f.js"><link rel="prefetch" href="/BlackLab/assets/js/29.ee44dd00.js"><link rel="prefetch" href="/BlackLab/assets/js/3.5ef7a69e.js"><link rel="prefetch" href="/BlackLab/assets/js/30.fd9d089f.js"><link rel="prefetch" href="/BlackLab/assets/js/31.9017b156.js"><link rel="prefetch" href="/BlackLab/assets/js/32.0bc1c944.js"><link rel="prefetch" href="/BlackLab/assets/js/33.a0eb6780.js"><link rel="prefetch" href="/BlackLab/assets/js/34.3e8accbe.js"><link rel="prefetch" href="/BlackLab/assets/js/35.174c0c0c.js"><link rel="prefetch" href="/BlackLab/assets/js/36.fe5c8cd3.js"><link rel="prefetch" href="/BlackLab/assets/js/37.3e2dcc58.js"><link rel="prefetch" href="/BlackLab/assets/js/38.1bf30664.js"><link rel="prefetch" href="/BlackLab/assets/js/39.e68f015e.js"><link rel="prefetch" href="/BlackLab/assets/js/4.d4eaec4c.js"><link rel="prefetch" href="/BlackLab/assets/js/40.dc707cff.js"><link rel="prefetch" href="/BlackLab/assets/js/41.7d6e5fe8.js"><link rel="prefetch" href="/BlackLab/assets/js/42.ed42da15.js"><link rel="prefetch" href="/BlackLab/assets/js/43.ade5908f.js"><link rel="prefetch" href="/BlackLab/assets/js/44.dc10efee.js"><link rel="prefetch" href="/BlackLab/assets/js/45.4d4f2c69.js"><link rel="prefetch" href="/BlackLab/assets/js/46.68eefd9d.js"><link rel="prefetch" href="/BlackLab/assets/js/47.22504675.js"><link rel="prefetch" href="/BlackLab/assets/js/48.6011aa57.js"><link rel="prefetch" href="/BlackLab/assets/js/49.01098fa5.js"><link rel="prefetch" href="/BlackLab/assets/js/5.49744fc9.js"><link rel="prefetch" href="/BlackLab/assets/js/50.6e1abbdf.js"><link rel="prefetch" href="/BlackLab/assets/js/51.bd551381.js"><link rel="prefetch" href="/BlackLab/assets/js/52.bac90b56.js"><link rel="prefetch" href="/BlackLab/assets/js/53.94477c27.js"><link rel="prefetch" href="/BlackLab/assets/js/54.3d2cdc9b.js"><link rel="prefetch" href="/BlackLab/assets/js/55.6e4ecbe4.js"><link rel="prefetch" href="/BlackLab/assets/js/56.af31f5d9.js"><link rel="prefetch" href="/BlackLab/assets/js/57.477e686a.js"><link rel="prefetch" href="/BlackLab/assets/js/58.fa01aa4c.js"><link rel="prefetch" href="/BlackLab/assets/js/59.d7d2e42a.js"><link rel="prefetch" href="/BlackLab/assets/js/6.39c16ebc.js"><link rel="prefetch" href="/BlackLab/assets/js/60.8bdb1e24.js"><link rel="prefetch" href="/BlackLab/assets/js/61.9fa92433.js"><link rel="prefetch" href="/BlackLab/assets/js/62.6a62dd3f.js"><link rel="prefetch" href="/BlackLab/assets/js/63.639c347b.js"><link rel="prefetch" href="/BlackLab/assets/js/64.f27d1d5d.js"><link rel="prefetch" href="/BlackLab/assets/js/65.cae1de64.js"><link rel="prefetch" href="/BlackLab/assets/js/66.883cfc5f.js"><link rel="prefetch" href="/BlackLab/assets/js/67.b1761c52.js"><link rel="prefetch" href="/BlackLab/assets/js/7.fc2d2638.js"><link rel="prefetch" href="/BlackLab/assets/js/8.0ce128f6.js"><link rel="prefetch" href="/BlackLab/assets/js/9.3aa625e7.js">
    <link rel="stylesheet" href="/BlackLab/assets/css/0.styles.490e2dbe.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/BlackLab/" class="home-link router-link-active"><!----> <span class="site-name">BlackLab</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/BlackLab/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/BlackLab/server/" class="nav-link">
  Webservice
</a></div><div class="nav-item"><a href="/BlackLab/frontend/" class="nav-link">
  Frontend
</a></div><div class="nav-item"><a href="/BlackLab/development/" class="nav-link router-link-active">
  Developers
</a></div> <a href="https://github.com/INL/BlackLab" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/BlackLab/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/BlackLab/server/" class="nav-link">
  Webservice
</a></div><div class="nav-item"><a href="/BlackLab/frontend/" class="nav-link">
  Frontend
</a></div><div class="nav-item"><a href="/BlackLab/development/" class="nav-link router-link-active">
  Developers
</a></div> <a href="https://github.com/INL/BlackLab" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/BlackLab/development/" aria-current="page" class="sidebar-link">Development resources</a></li><li><a href="/BlackLab/development/downloads.html" class="sidebar-link">Downloads</a></li><li><a href="/BlackLab/development/examples/example-application.html" class="sidebar-link">The Example Application</a></li><li><a href="/BlackLab/development/query-tool.html" class="sidebar-link">QueryTool</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Customization</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/BlackLab/development/solr/" class="sidebar-link">Solr (EXPERIMENTAL)</a></li><li><a href="/BlackLab/development/migration-guide.html" aria-current="page" class="active sidebar-link">Migration guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BlackLab/development/migration-guide.html#migrating-from-blacklab-1-7-to-2-0" class="sidebar-link">Migrating from BlackLab 1.7 to 2.0</a></li></ul></li><li><a href="/BlackLab/development/changelog.html" class="sidebar-link">Change Log</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="migration-guide"><a href="#migration-guide" class="header-anchor">#</a> Migration guide</h1> <h2 id="migrating-from-blacklab-1-7-to-2-0"><a href="#migrating-from-blacklab-1-7-to-2-0" class="header-anchor">#</a> Migrating from BlackLab 1.7 to 2.0</h2> <p>BlackLab Server 2.0 contains one significant change to the API: metadata values are now always reported as lists, even if there is only one value. Because it is now possible to index multiple values for a single metadata field (for example, to associate two authors or two images with one document), this change was required.</p> <p>Where BlackLab 2.0 does differ significantly is in its Java API and configuration files. If you use the Java API, for example because you've written your own DocIndexer class, this page helps you migrate it to 2.0.</p> <h3 id="terminology"><a href="#terminology" class="header-anchor">#</a> Terminology</h3> <ul><li>&quot;Searcher&quot; -&gt; &quot;BlackLab index&quot;</li> <li>&quot;complex field&quot; -&gt; &quot;annotated field&quot;</li> <li>&quot;property on a complex field&quot; -&gt; &quot;annotation on an annotated field&quot;</li> <li>&quot;an indexed alternative for a property&quot; (e.g. case- and diacritics-insensitive) -&gt; &quot;an indexed sensitivity for an annotation&quot;</li></ul> <p>So, for example, an annotated field &quot;contents&quot; might have annotations &quot;word&quot;, &quot;lemma&quot; and &quot;pos&quot; (part of speech), and the &quot;word&quot; annotation might have two sensitivities indexed: (case- and diacritics-) sensitive, and (case- and diacritics-) insensitive.</p> <h3 id="migrating-the-configuration-file-s"><a href="#migrating-the-configuration-file-s" class="header-anchor">#</a> Migrating the configuration file(s)</h3> <p>Usually you will use either a file <code>blacklab-server.yaml</code> (for BlackLab Serer), or <code>blacklab.yaml</code> (for e.g. IndexTool, QueryTool or other BlackLab applications). (JSON works too if you prefer)</p> <p>A new, cleaner format was added in BlackLab 2.0. The old format still works, but it is a good idea to convert to the new format as the old format will eventually be removed.</p> <p>For more information about the config file format, see <a href="/BlackLab/server/configuration.html">Configuration files</a>.</p> <h3 id="migrating-docindexers"><a href="#migrating-docindexers" class="header-anchor">#</a> Migrating DocIndexers</h3> <p>If you have a custom implementation of DocIndexer for your own input format, please ensure that it has a default constructor. If instead if has a constructor that takes an <code>Indexer</code>, change <code>Indexer</code> to <code>DocWriter</code>.</p> <h3 id="method-naming"><a href="#method-naming" class="header-anchor">#</a> Method naming</h3> <p>For many classes, methods were renamed from getSomeThing() to simply someThing(). While this may not be the convention in Java, it makes for less noisy, more natural-sounding code, especially when chaining methods. It also saves on typing. For example, compare these two examples:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> luceneField <span class="token operator">=</span> index
    <span class="token punctuation">.</span><span class="token function">getAnnotatedField</span><span class="token punctuation">(</span><span class="token string">&quot;contents&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token string">&quot;word&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">getSensitivity</span><span class="token punctuation">(</span><span class="token class-name">MatchSensitivity</span><span class="token punctuation">.</span><span class="token constant">SENSITIVE</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">getLuceneField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> luceneField <span class="token operator">=</span> index
    <span class="token punctuation">.</span><span class="token function">annotatedField</span><span class="token punctuation">(</span><span class="token string">&quot;contents&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">&quot;word&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">sensitivity</span><span class="token punctuation">(</span><span class="token class-name">MatchSensitivity</span><span class="token punctuation">.</span><span class="token constant">SENSITIVE</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">luceneField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="important-renamed-packages-and-classes"><a href="#important-renamed-packages-and-classes" class="header-anchor">#</a> Important renamed packages and classes</h3> <p>General:</p> <ul><li>Searcher -&gt; BlackLabIndex</li></ul> <p>Classes used while indexing:</p> <ul><li>ComplexField -&gt; AnnotatedFieldWriter</li> <li>ComplexFieldProperty -&gt; AnnotationWriter</li> <li>ComplexFieldUtil -&gt; AnnotatedFieldNameUtil</li></ul> <p>Index structure:</p> <ul><li>IndexStructure -&gt; IndexMetadata</li> <li>ComplexFieldDesc -&gt; AnnotatedField</li> <li>PropertyDesc -&gt; Annotation</li></ul> <p>Packages:</p> <ul><li>nl.inl.blacklab.search.indexstructure -&gt; .search.indexmetadata</li> <li>nl.inl.blacklab.externalstorage -&gt; .contentstore</li></ul> <h3 id="migrating-blacklab-programs"><a href="#migrating-blacklab-programs" class="header-anchor">#</a> Migrating BlackLab programs</h3> <p>Methods:</p> <ul><li>instead of BlackLabIndex.open(), use BlackLab.open()</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/INL/BlackLab/edit/dev/site/docs/development/migration-guide.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/15/2022, 2:13:30 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/BlackLab/development/solr/" class="prev">
        Solr (EXPERIMENTAL)
      </a></span> <span class="next"><a href="/BlackLab/development/changelog.html">
        Change Log
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/BlackLab/assets/js/app.7a3441ee.js" defer></script><script src="/BlackLab/assets/js/2.5fe0985c.js" defer></script><script src="/BlackLab/assets/js/21.61b5d978.js" defer></script>
  </body>
</html>
